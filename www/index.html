<!DOCTYPE html>
<!-- Copyright (c) Patrice Boulet 2015 -->
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="js/bootstrap-3.3.4/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>Course Grades</title>
    </head>
    <body>
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" 
                            data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="" 
                       data-bind="visible: appState.previousPageTitle() != appState.activePageTitle()" >
                        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                        <span data-bind="text: appState.previousPageTitle"></span>
                    </a>
                    <p class="navbar-text" data-bind="text: appState.activePageTitle()"></p>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#">Link</a></li>
                    </ul>
                </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
        </nav>
        
        <div class="container">
            <!-- ko if: appState.activePage() == 'Sessions' -->
                <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                    <!-- ko foreach: { data: dataModel.sessions, as: 'session' } -->
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab">
                                <a role="button" data-toggle="collapse" data-parent="#accordion"
                                    data-bind="attr:{href: '#session' + session.id}, 
                                               click: $root.sessionOnClick.bind(session)">
                                    <h4 class="panel-title">
                                        <span class="margin">
                                            <input type="text" class="form-input" placeholder="Enter the session's title..."
                                                   data-bind="value: session.title">
                                        </span>
                                        <span class="pull-right glyphicon glyphicon-plus-sign" aria-hidden="true" 
                                              data-bind="visible: $root.appState.activeSession() == null ||
                                                         $root.appState.activeSession().id != session.id">
                                        </span>
                                        <span class="pull-right glyphicon glyphicon-minus-sign" aria-hidden="true"
                                              data-bind="visible: $root.appState.activeSession() != null &&
                                                         $root.appState.activeSession().id == session.id">
                                        </span>
                                    </h4>
                                </a>
                            </div>
                            <div class="panel-collapse collapse" role="tabpanel"
                                 data-bind="attr: {id: 'session' + session.id, 'aria-expanded': $root.appState.activeSession() != null &&
                                                         $root.appState.activeSession().id == session.id ? 'true' : 'false'}" >
                                 <ul class="list-group">
                                     <!-- ko foreach: { data: $data.courses, as: 'course' } -->
                                        <li class="list-group-item" 
                                            data-bind="click: $root.changeAndNavigateToActiveCourse.bind(course)" 
                                          style="cursor:pointer">
                                            <div class="row">
                                                <input style="margin-left:10px; margin-bottom:10px" type="text" class="form-input"
                                                   data-bind="value: course.title, visible: course.creationMode(), 
                                                              hasFocus: course.creationMode(),
                                                              attr: {placeholder: $root.appCulture.strings()
                                                                    .getString('ENTER_COURSE_TITLE_PLACEHOLDER',
                                                                        $root.appCulture.lang())},
                                                              valueUpdate:'afterkeydown'"/>
                                            </div>
                                            <div class="row" style="text-align:center">
                                                <button class="btn btn-xs btn-success" 
                                                        data-bind="visible: course.creationMode(),
                                                                   text: $root.appCulture.strings()
                                                           .getString('CREATE', $root.appCulture.lang()),
                                                                   disable: course.title().length < 1,
                                                                   click: $root.createCourse.bind(course),
                                                                   clickBubble: false"></button>
                                                <button class="btn btn-xs btn-success" 
                                                        data-bind="visible: course.creationMode(),
                                                                   text: $root.appCulture.strings()
                                                                    .getString('CREATE_AND_ADD_ANOTHER', 
                                                                   $root.appCulture.lang()),
                                                                   disable: course.title().length < 1,
                                                                   click: $root.addAnotherCourse.bind(course),
                                                                   clickBubble: false"></button>
                                                <button class="btn btn-xs btn-danger" 
                                                        data-bind="visible: course.creationMode(), 
                                                                   click: $root.cancelAddNewCourse.bind(course)">Cancel</button>
                                            </div>
                                            <span data-bind="text: course.title, visible: !course.creationMode()"></span>
                                            <span class="pull-right" data-bind="text: course.grade() != null ? 
                                                                                course.grade() + '%' : '-- %',
                                                                                visible: !course.creationMode()"></span>
                                        </li>
                                     <!-- /ko -->
                                    <li class="list-group-item" style="padding:0" style="cursor:pointer" 
                                        data-bind="visible: session.showCreateNewCourse()">
                                        <button class="btn btn-success" style="width: 100%; border-radius: 0px 0px 2px 2px"
                                                data-bind="click: $root.addNewCourse">
                                          <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> 
                                          <span data-bind="text: $root.appCulture.strings()
                                                           .getString('ADD_NEW_COURSE', $root.appCulture.lang())"></span>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    <!-- /ko -->
                </div>
            <!-- /ko -->
            <!-- ko if: appState.activePage() == 'Course' -->
				<div class="tabbable-line tabs-below"  style="min-height:100%">
					<div class="tab-content">
						<div class="tab-pane active" id="tab_below_1">
                          <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingTwo">
                              <h4 class="panel-title">
                                  <span data-bind="text: $root.appCulture.strings()
                                   .getString('SYLLABUS_ITEMS', $root.appCulture.lang())"></span>
                              </h4>
                            </div>
                            <ul class="list-group">
                                <!-- ko if: appState.activeCourse().syllabusItems().length < 1 -->
                                    <li class="list-group-item">This course has no item yet.</li>
                                <!-- /ko -->
                                <!-- ko foreach: {data: appState.activeCourse().syllabusItems, as: 'syllabusItem'} -->
                                    <li class="list-group-item" data-bind="style: {padding: syllabusItem.isParent ? 
                                                                           '0px 0px' : '10px 15px 10px 15px'}">
                                        <!-- ko if: !syllabusItem.isParent -->
                                        <span data-bind="text: syllabusItem.title"></span>
                                        <span class="pull-right" data-bind="text: syllabusItem.gradePercent() == null ?
                                                                                '-- %' : syllabusItem.gradePercent()"></span>
                                        <!-- /ko -->
                                        <!-- ko if: syllabusItem.isParent -->
                                            <div class="panel-group" id="syllabusItemAccordion" role="tablist" aria-multiselectable="true" 
                                                 style="margin-bottom:0px">
                                                <div class="panel panel-default">
                                                    <div class="panel-heading" role="tab">
                                                        <a role="button" data-toggle="collapse" data-parent="#syllabusItemAccordion"
                                                            data-bind="attr: {href: '#syllabusItem' + syllabusItem.id}">
                                                            <h4 class="panel-title">
                                                                <span data-bind="text: syllabusItem.title() + ''"></span>
                                                                <span class="badge" data-bind="text: syllabusItem.children().length"></span>
                                                                <span class="pull-right" data-bind="text: syllabusItem.gradePercent() == null ?
                                                                                                        '-- %' : syllabusItem.gradePercent()"></span>
                                                            </h4>
                                                        </a>
                                                    </div>
                                                    <div class="panel-collapse collapse in" role="tabpanel" aria-expanded="true"
                                                         data-bind="attr: {id: 'syllabusItem' + syllabusItem.id}">
                                                         <ul class="list-group">
                                                             <!-- ko foreach: { data: syllabusItem.children, as: 'child' } -->
                                                                <li class="list-group-item">
                                                                    <span data-bind="text: child.title"></span>
                                                                    <span class="pull-right" data-bind="text: child.gradePercent() == null ?
                                                                                                        '-- %' : child.gradePercent()"></span>
                                                                </li>
                                                             <!-- /ko -->
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        <!-- /ko -->
                                    </li>
                                <!-- /ko -->
                            </ul>
                          </div>
						</div>
						<div class="tab-pane" id="tab_below_2">
              <!--TODO : make all strings variable -->
              <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title" role="tab">
                      <span data-bind="text: $root.appCulture.strings() .getString('DESCRIPTION', $root.appCulture.lang())">
                        Description</span>
                    </h4>
                </div>
                <div class="panel-collapse collapse in" role="tabpanel">
                  <ul class="list-group">
                    <li class="list-group-item" contenteditable="true">
                      <h4>course website:</h4>
                      <p>Add a course description</p>
                    </li>
                  </ul>
                </div>
              </div>
							<p>
								TODO: add the info stuff here.
							</p>
						</div>
					</div>
					<ul class="nav nav-tabs">
						<li class="active">
							<a href="#tab_below_1" data-toggle="tab">
                                <span data-bind="text: $root.appCulture.strings()
                                   .getString('GRADES_TAB_TITLE', $root.appCulture.lang())"></span>
                            </a>
						</li>
						<li class="">
							<a href="#tab_below_2" data-toggle="tab">
                                <span data-bind="text: $root.appCulture.strings()
                                   .getString('INFO_TAB_TITLE', $root.appCulture.lang())"></span>
							</a>
						</li>
					</ul>
				</div>
            <!-- /ko -->
        </div><!-- /.container -->
        <!-- <div id="deviceready" class="blink">
            <p class="event listening">App in development...</p>
            <h2 class="event received">Hello World!!!</h2>
        </div> -->
        <!-- <script type="text/javascript" src="phonegap.js"></script> -->
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/bootstrap-3.3.4/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/knockout/knockout-3.3.0.js"></script>
        <script type="text/javascript" src="js/strings.js"></script>
        <script type="text/javascript" src="js/dataModel.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
    </body>
</html>
